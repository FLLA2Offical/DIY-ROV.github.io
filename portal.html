<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Portal - FLL Robotics</title>
<style>
body {
  margin:0;
  font-family: 'Segoe UI', sans-serif;
  background:#0a0f1e;
  color:#fff;
  display:flex;
  flex-direction:row;
  height:100vh;
  transition: all 0.3s;
}
#sidebar {
  background:#11376b;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding-top:20px;
  transition: all 0.3s;
  position:fixed;
  z-index:100;
  width:80px;
  height:100%;
}
#sidebar-top img {
  width:70px; height:70px;
  border-radius:50%;
  border:2px solid #e46d0d;
  margin-bottom:20px;
  cursor:pointer;
}
#sidebar-buttons {
  flex:1; display:flex; flex-direction:column; align-items:center;
}
#sidebar button {
  background:#11376b; color:#e46d0d;
  border:2px solid #e46d0d;
  border-radius:12px; margin:10px;
  padding:12px; cursor:pointer;
  transition:0.3s;
  width:60px; height:60px; font-size:1.5em;
}
#sidebar button:hover { color:#fff; box-shadow:0 0 20px #e46d0d; transform:scale(1.1); }
#sidebar-bottom { margin-top:auto; text-align:center; }
#sidebar-bottom img { vertical-align:middle; }
#sidebarTime { margin-bottom:10px; font-size:0.9em; }

#mainContent {
  flex:1;
  margin-left:100px;
  padding:20px;
  display:flex;
  flex-direction:column;
  align-items:center;
  overflow-y:auto;
  transition:all 0.3s;
}

.service-btn {
  background:#11376b; color:#e46d0d;
  border:2px solid #e46d0d;
  border-radius:12px;
  padding:20px;
  margin:10px;
  cursor:pointer;
  font-size:1.2em;
  transition:0.3s;
}
.service-btn:hover { color:#fff; box-shadow:0 0 20px #e46d0d; transform:scale(1.05); }

#googleServices, #settingsPanel, #welcomeScreen { display:none; flex-wrap:wrap; justify-content:center; margin-top:20px; }

button.saveBtn { padding:8px 15px; margin-top:10px; border-radius:10px; cursor:pointer; border:2px solid #e46d0d; background:#11376b; color:#e46d0d; transition:0.3s; }
button.saveBtn:hover { color:#fff; box-shadow:0 0 20px #e46d0d; transform:scale(1.05); }

/* Glowing Welcome Text */
@keyframes glow {
  from { text-shadow: 0 0 10px #e46d0d, 0 0 20px #e46d0d, 0 0 30px #e46d0d; }
  to   { text-shadow: 0 0 20px #e46d0d, 0 0 40px #e46d0d, 0 0 60px #e46d0d; }
}
#welcomeScreen h1 {
  color:#e46d0d;
  text-shadow: 0 0 10px #e46d0d, 0 0 20px #e46d0d, 0 0 30px #e46d0d;
  animation: glow 1.5s infinite alternate;
}
</style>
</head>
<body>

<div id="sidebar">
  <!-- Top Profile Photo -->
  <div id="sidebar-top">
    <img id="sidebarProfileImg" src="default-profile.png" alt="Profile" onclick="goToWelcome()">
  </div>

  <!-- Middle Buttons -->
  <div id="sidebar-buttons">
    <button id="googleBtn" onclick="showPanel('google')">üü¢</button>
    <button id="settingsBtn" onclick="showPanel('settings')">‚öôÔ∏è</button>
  </div>

  <!-- Bottom Info -->
  <div id="sidebar-bottom">
    <div id="sidebarTime"></div>
    <div>
      <img src="notification_bell.png" alt="Bell" style="width:25px; height:25px; margin-right:10px;">
      <img src="69309logo.png" alt="Team 69309" style="width:30px; height:30px; margin-right:5px;">
      <img src="1AEB9244-1D70-4692-8E0A-53BC04AFC0B5-removebg-preview.png" alt="Team 69310" style="width:30px; height:30px;">
    </div>
  </div>
</div>

<div id="mainContent">
  <!-- Welcome Screen -->
  <div id="welcomeScreen">
    <h1 id="welcomeText">Welcome, User</h1>
  </div>

  <!-- Google Services -->
  <div id="googleServices">
    <button class="service-btn" onclick="window.open('https://mail.google.com','_blank')">üìß Gmail</button>
    <button class="service-btn" onclick="window.open('https://drive.google.com','_blank')">üóÇÔ∏è Drive</button>
    <button class="service-btn" onclick="window.open('https://calendar.google.com','_blank')">üìÖ Calendar</button>
    <button class="service-btn" onclick="window.open('https://docs.google.com','_blank')">üìÑ Docs</button>
    <button class="service-btn" onclick="window.open('https://sheets.google.com','_blank')">üìä Sheets</button>
    <button class="service-btn" onclick="window.open('https://slides.google.com','_blank')">üéûÔ∏è Slides</button>
    <button class="service-btn" onclick="window.open('https://www.canva.com/','_blank')">Canva</button>
  </div>

  <!-- Settings Panel -->
  <div id="settingsPanel">
    <h2>Settings</h2>

    <!-- Profile Settings -->
    <h3>Profile</h3>
    <img id="profileImage" src="default-profile.png" alt="Profile Picture" style="width:120px; height:120px; border-radius:50%; border:3px solid #e46d0d;">
    <input type="file" accept="image/*" onchange="uploadProfile(event)">
    <p>Username:</p>
    <input type="text" id="usernameInput" placeholder="Enter your username" oninput="checkTheodore()">
    <div id="createAccountPanel" style="display:none; margin-top:10px;">
      <h4>Create Account</h4>
      <input type="text" id="newUsername" placeholder="New Username">
      <input type="password" id="newPassword" placeholder="New Password">
      <button class="saveBtn" onclick="createAccount()">Create Account</button>
      <p id="createAccountMsg" style="color:#e46d0d;"></p>
    </div>

    <!-- Sidebar Settings -->
    <h3>Sidebar</h3>
    <label>Sidebar Position:</label>
    <select id="positionSelect" onchange="changeSidebarPosition()">
      <option value="left">Left</option>
      <option value="right">Right</option>
      <option value="top">Top</option>
      <option value="bottom">Bottom</option>
    </select>
    <h4>Change Sidebar Buttons</h4>
    <input type="text" id="googleText" placeholder="Google Btn Emoji/Text">
    <input type="text" id="settingsText" placeholder="Settings Btn Emoji/Text">
    <button class="saveBtn" onclick="saveSidebarSettings()">Save Settings</button>
  </div>
</div>

<script>
// Panels
function showPanel(panel){
  document.getElementById('welcomeScreen').style.display='none';
  document.getElementById('googleServices').style.display='none';
  document.getElementById('settingsPanel').style.display='none';
  if(panel==='google') document.getElementById('googleServices').style.display='flex';
  if(panel==='settings') document.getElementById('settingsPanel').style.display='block';
}

// Welcome Screen
function showWelcome(username){
  document.getElementById('welcomeScreen').style.display='flex';
  document.getElementById('googleServices').style.display='none';
  document.getElementById('settingsPanel').style.display='none';
  document.getElementById('welcomeText').textContent = `Welcome, ${username}`;
}
function goToWelcome(){ 
  const username = localStorage.getItem('currentUser') || 'User';
  showWelcome(username);
}

// Profile Image Upload
function uploadProfile(event){
  const file = event.target.files[0];
  if(file){
    const img = document.getElementById('profileImage');
    const sidebarImg = document.getElementById('sidebarProfileImg');
    const reader = new FileReader();
    reader.onload = function(e){
      img.src = e.target.result;
      sidebarImg.src = e.target.result;
      localStorage.setItem('profileImage', e.target.result);
    }
    reader.readAsDataURL(file);
  }
}

// Theodore Only Account Creation
function checkTheodore(){
  const username = document.getElementById('usernameInput').value.trim();
  document.getElementById('createAccountPanel').style.display = (username.toLowerCase() === 'theodore') ? 'block' : 'none';
}
function createAccount(){
  const newUser = document.getElementById('newUsername').value.trim();
  const newPass = document.getElementById('newPassword').value.trim();
  const msg = document.getElementById('createAccountMsg');
  if(newUser && newPass){
    let accounts = JSON.parse(localStorage.getItem('accounts')) || {};
    if(accounts[newUser]){
      msg.textContent='Username already exists!';
      msg.style.color='orange';
    } else {
      accounts[newUser] = newPass;
      localStorage.setItem('accounts', JSON.stringify(accounts));
      msg.textContent=`Account "${newUser}" created!`;
      msg.style.color='#0f0';
      document.getElementById('newUsername').value='';
      document.getElementById('newPassword').value='';
    }
  } else { msg.textContent='Enter both username and password'; msg.style.color='red'; }
}

// Sidebar Settings
function saveSidebarSettings(){
  localStorage.setItem('sidebarGoogle', document.getElementById('googleText').value);
  localStorage.setItem('sidebarSettings', document.getElementById('settingsText').value);
  applySidebarSettings();
}
function applySidebarSettings(){
  document.getElementById('googleBtn').textContent = localStorage.getItem('sidebarGoogle') || 'üü¢';
  document.getElementById('settingsBtn').textContent = localStorage.getItem('sidebarSettings') || '‚öôÔ∏è';
}

// Sidebar Position
function changeSidebarPosition(){
  const pos = document.getElementById('positionSelect').value;
  const sidebar = document.getElementById('sidebar');
  const main = document.getElementById('mainContent');
  sidebar.style.left=''; sidebar.style.right=''; sidebar.style.top=''; sidebar.style.bottom='';
  main.style.marginLeft='0'; main.style.marginRight='0'; main.style.marginTop='0'; main.style.marginBottom='0';
  if(pos==='left'){ sidebar.style.left='0'; sidebar.style.top='0'; sidebar.style.width='80px'; sidebar.style.height='100%'; sidebar.style.flexDirection='column'; main.style.marginLeft='100px'; }
  if(pos==='right'){ sidebar.style.right='0'; sidebar.style.top='0'; sidebar.style.width='80px'; sidebar.style.height='100%'; sidebar.style.flexDirection='column'; main.style.marginRight='100px'; }
  if(pos==='top'){ sidebar.style.top='0'; sidebar.style.left='0'; sidebar.style.width='100%'; sidebar.style.height='60px'; sidebar.style.flexDirection='row'; main.style.marginTop='80px'; }
  if(pos==='bottom'){ sidebar.style.bottom='0'; sidebar.style.left='0'; sidebar.style.width='100%'; sidebar.style.height='60px'; sidebar.style.flexDirection='row'; main.style.marginBottom='80px'; }
  localStorage.setItem('sidebarPosition', pos);
}

// Live Clock
function updateTime() {
  const now = new Date();
  document.getElementById('sidebarTime').textContent = now.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
  setTimeout(updateTime, 1000);
}

// Load Saved Data
window.onload = function(){
  const savedImg = localStorage.getItem('profileImage');
  if(savedImg){
    document.getElementById('profileImage').src = savedImg;
    document.getElementById('sidebarProfileImg').src = savedImg;
  }
  applySidebarSettings();
  const pos = localStorage.getItem('sidebarPosition') || 'left';
  document.getElementById('positionSelect').value = pos;
  changeSidebarPosition();
  updateTime();
  
  // Show welcome screen by default
  const user = localStorage.getItem('currentUser') || 'User';
  showWelcome(user);
}
</script>

</body>
</html>
