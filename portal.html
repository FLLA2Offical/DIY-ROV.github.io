<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Portal - FLL Robotics</title>
<style>
body {
  margin:0;
  font-family: 'Segoe UI', sans-serif;
  background:#0a0f1e;
  color:#fff;
  display:flex;
  flex-direction:row;
  height:100vh;
  transition: all 0.3s;
}
#sidebar {
  background:#11376b;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding-top:20px;
  transition: all 0.3s;
  position:fixed;
  z-index:100;
}
#sidebar button {
  background:#11376b; color:#e46d0d;
  border:2px solid #e46d0d;
  border-radius:12px; margin:10px;
  padding:12px; cursor:pointer;
  transition:0.3s;
  width:60px;
  height:60px;
  font-size:1.5em;
}
#sidebar button:hover { color:#fff; box-shadow:0 0 20px #e46d0d; transform:scale(1.1); }

#mainContent {
  flex:1;
  margin-left:100px;
  padding:20px;
  display:flex;
  flex-direction:column;
  align-items:center;
  overflow-y:auto;
  transition: all 0.3s;
}

.service-btn {
  background:#11376b; color:#e46d0d;
  border:2px solid #e46d0d;
  border-radius:12px;
  padding:20px;
  margin:10px;
  cursor:pointer;
  font-size:1.2em;
  transition:0.3s;
}
.service-btn:hover { color:#fff; box-shadow:0 0 20px #e46d0d; transform:scale(1.05); }

#googleServices, #profileSettings, #settingsPanel {
  display:none;
  flex-wrap:wrap;
  justify-content:center;
  margin-top:20px;
}

#profileSettings img {
  width:120px;
  height:120px;
  border-radius:50%;
  border:3px solid #e46d0d;
  margin-bottom:20px;
}

input[type="file"], input[type="text"], input[type="password"], select {
  display:block;
  margin:10px auto;
  padding:5px;
  border-radius:8px;
}

#createAccountPanel input {
  width:200px;
}

button.saveBtn {
  padding:8px 15px;
  margin-top:10px;
  border-radius:10px;
  cursor:pointer;
  border:2px solid #e46d0d;
  background:#11376b;
  color:#e46d0d;
  transition:0.3s;
}
button.saveBtn:hover { color:#fff; box-shadow:0 0 20px #e46d0d; transform:scale(1.05); }
</style>
</head>
<body>

<div id="sidebar">
  <button id="googleBtn" onclick="showPanel('google')">üü¢</button>
  <button id="profileBtn" onclick="showPanel('profile')">üë§</button>
  <button id="settingsBtn" onclick="showPanel('settings')">‚öôÔ∏è</button>
</div>

<div id="mainContent">
  <!-- Google Services -->
  <div id="googleServices">
    <button class="service-btn" onclick="window.open('https://mail.google.com','_blank')">üìß Gmail</button>
    <button class="service-btn" onclick="window.open('https://drive.google.com','_blank')">üóÇÔ∏è Drive</button>
    <button class="service-btn" onclick="window.open('https://calendar.google.com','_blank')">üìÖ Calendar</button>
    <button class="service-btn" onclick="window.open('https://docs.google.com','_blank')">üìÑ Docs</button>
    <button class="service-btn" onclick="window.open('https://sheets.google.com','_blank')">üìä Sheets</button>
    <button class="service-btn" onclick="window.open('https://slides.google.com','_blank')">üéûÔ∏è Slides</button>
  </div>

  <!-- Profile / Settings -->
  <div id="profileSettings">
    <h2>Profile Settings</h2>
    <img id="profileImage" src="default-profile.png" alt="Profile Picture">
    <input type="file" accept="image/*" onchange="uploadProfile(event)">
    
    <p>Username:</p>
    <input type="text" id="usernameInput" placeholder="Enter your username" oninput="checkTheodore()">
    
    <!-- Only Theodore sees this -->
    <div id="createAccountPanel" style="display:none; margin-top:20px;">
      <h3>Create Account</h3>
      <input type="text" id="newUsername" placeholder="New Username">
      <input type="password" id="newPassword" placeholder="New Password">
      <button class="saveBtn" onclick="createAccount()">Create Account</button>
      <p id="createAccountMsg" style="color:#e46d0d;"></p>
    </div>
  </div>

  <!-- Settings Panel -->
  <div id="settingsPanel">
    <h2>Sidebar Settings</h2>
    <label>Sidebar Position:</label>
    <select id="positionSelect" onchange="changeSidebarPosition()">
      <option value="left">Left</option>
      <option value="right">Right</option>
      <option value="top">Top</option>
      <option value="bottom">Bottom</option>
    </select>

    <h3>Change Sidebar Buttons</h3>
    <input type="text" id="googleText" placeholder="Google Btn Emoji/Text">
    <input type="text" id="profileText" placeholder="Profile Btn Emoji/Text">
    <input type="text" id="settingsText" placeholder="Settings Btn Emoji/Text">
    <button class="saveBtn" onclick="saveSidebarSettings()">Save Settings</button>
  </div>
</div>

<script>
// Panels
function showPanel(panel){
  document.getElementById('googleServices').style.display='none';
  document.getElementById('profileSettings').style.display='none';
  document.getElementById('settingsPanel').style.display='none';
  if(panel==='google') document.getElementById('googleServices').style.display='flex';
  if(panel==='profile') document.getElementById('profileSettings').style.display='block';
  if(panel==='settings') document.getElementById('settingsPanel').style.display='block';
}

// Profile upload with save
function uploadProfile(event){
  const file = event.target.files[0];
  if(file){
    const img = document.getElementById('profileImage');
    const reader = new FileReader();
    reader.onload = function(e){
      img.src = e.target.result;
      localStorage.setItem('profileImage', e.target.result);
    }
    reader.readAsDataURL(file);
  }
}

// Show create account only for Theodore
function checkTheodore(){
  const username = document.getElementById('usernameInput').value.trim();
  const panel = document.getElementById('createAccountPanel');
  if(username.toLowerCase() === 'theodore'){
    panel.style.display='block';
  } else {
    panel.style.display='none';
  }
}

// Create a new account (stored in localStorage)
function createAccount(){
  const newUser = document.getElementById('newUsername').value.trim();
  const newPass = document.getElementById('newPassword').value.trim();
  const msg = document.getElementById('createAccountMsg');
  if(newUser && newPass){
    let accounts = JSON.parse(localStorage.getItem('accounts')) || {};
    if(accounts[newUser]){
      msg.textContent = 'Username already exists!';
      msg.style.color='orange';
    } else {
      accounts[newUser] = newPass;
      localStorage.setItem('accounts', JSON.stringify(accounts));
      msg.textContent = `Account "${newUser}" created!`;
      msg.style.color='#0f0';
      document.getElementById('newUsername').value='';
      document.getElementById('newPassword').value='';
    }
  } else {
    msg.textContent='Enter both username and password';
    msg.style.color='red';
  }
}

// Save sidebar settings
function saveSidebarSettings(){
  localStorage.setItem('sidebarGoogle', document.getElementById('googleText').value);
  localStorage.setItem('sidebarProfile', document.getElementById('profileText').value);
  localStorage.setItem('sidebarSettings', document.getElementById('settingsText').value);
  applySidebarSettings();
}

// Apply saved sidebar settings
function applySidebarSettings(){
  const google = localStorage.getItem('sidebarGoogle') || 'üü¢';
  const profile = localStorage.getItem('sidebarProfile') || 'üë§';
  const settings = localStorage.getItem('sidebarSettings') || '‚öôÔ∏è';
  document.getElementById('googleBtn').textContent = google;
  document.getElementById('profileBtn').textContent = profile;
  document.getElementById('settingsBtn').textContent = settings;
}

// Sidebar position
function changeSidebarPosition(){
  const pos = document.getElementById('positionSelect').value;
  const sidebar = document.getElementById('sidebar');
  const main = document.getElementById('mainContent');

  sidebar.style.position='fixed';
  sidebar.style.left=''; sidebar.style.right=''; sidebar.style.top=''; sidebar.style.bottom='';
  main.style.marginLeft='0'; main.style.marginRight='0'; main.style.marginTop='0'; main.style.marginBottom='0';

  if(pos==='left'){ sidebar.style.left='0'; sidebar.style.top='0'; sidebar.style.width='80px'; sidebar.style.height='100%'; sidebar.style.flexDirection='column'; main.style.marginLeft='100px'; }
  if(pos==='right'){ sidebar.style.right='0'; sidebar.style.top='0'; sidebar.style.width='80px'; sidebar.style.height='100%'; sidebar.style.flexDirection='column'; main.style.marginRight='100px'; }
  if(pos==='top'){ sidebar.style.top='0'; sidebar.style.left='0'; sidebar.style.width='100%'; sidebar.style.height='60px'; sidebar.style.flexDirection='row'; main.style.marginTop='80px'; }
  if(pos==='bottom'){ sidebar.style.bottom='0'; sidebar.style.left='0'; sidebar.style.width='100%'; sidebar.style.height='60px'; sidebar.style.flexDirection='row'; main.style.marginBottom='80px'; }

  localStorage.setItem('sidebarPosition', pos);
}

// Load saved profile, sidebar settings and position
window.onload=function(){
  const savedImg = localStorage.getItem('profileImage');
  if(savedImg) document.getElementById('profileImage').src = savedImg;

  applySidebarSettings();

  const pos = localStorage.getItem('sidebarPosition') || 'left';
  document.getElementById('positionSelect').value = pos;
  changeSidebarPosition();
}
</script>

</body>
</html>
